---
layout: default
refactor: true
---

{% include lang.html %} {% assign all_pinned = site.posts | where: 'pin', 'true'
%} {% assign all_normal = site.posts | where_exp: 'item', 'item.pin != true and
item.hidden != true' %} {% assign posts = '' | split: '' %} {% assign
visible_start = paginator.page | minus: 1 | times: paginator.per_page %} {%
assign visible_end = visible_start | plus: paginator.per_page %} {% if
all_pinned.size > visible_start %} {% if all_pinned.size > visible_end %} {%
assign pinned_size = paginator.per_page %} {% else %} {% assign pinned_size =
all_pinned.size | minus: visible_start %} {% endif %} {% for i in
(visible_start..all_pinned.size) limit: pinned_size %} {% assign posts = posts |
push: all_pinned[i] %} {% endfor %} {% else %} {% assign pinned_size = 0 %} {%
endif %} {% assign normal_size = paginator.posts | size | minus: pinned_size %}
{% if normal_size > 0 %} {% if pinned_size > 0 %} {% assign normal_start = 0 %}
{% else %} {% assign normal_start = visible_start | minus: all_pinned.size %} {%
endif %} {% assign normal_end = normal_start | plus: normal_size | minus: 1 %}
{% for i in (normal_start..normal_end) %} {% assign posts = posts | push:
all_normal[i] %} {% endfor %} {% endif %}

<!-- 🌸 Post List -->
<div id="post-list" class="posts-container">
  {% for post in posts %}
  <article class="post-card">
    <a href="{{ post.url | relative_url }}" class="post-link">
      {% if post.image %} {% assign src = post.image.path | default: post.image
      %} {% unless src contains '//' %} {% assign src = post.media_subpath |
      append: '/' | append: src | replace: '//', '/' %} {% endunless %} {%
      assign alt = post.image.alt | xml_escape | default: 'Preview Image' %}
      <img src="{{ src }}" alt="{{ alt }}" class="post-thumbnail" />
      {% endif %}

      <div class="post-content">
        <h1 class="post-title">{{ post.title }}</h1>
        <p class="post-description">{% include post-description.html %}</p>

        <div class="post-meta">
          <span class="meta-item">
            <i class="far fa-calendar"></i>
            {% include datetime.html date=post.date lang=lang %}
          </span>

          {% if post.categories.size > 0 %}
          <span class="meta-item">
            <i class="far fa-folder-open"></i>
            {% for category in post.categories %} {{ category }}{% unless
            forloop.last %}, {% endunless %} {% endfor %}
          </span>
          {% endif %} {% if post.pin %}
          <span class="meta-item pin">
            <i class="fas fa-thumbtack"></i> 고정됨
          </span>
          {% endif %}
        </div>
      </div>
    </a>
  </article>
  {% endfor %}
</div>

{% if paginator.total_pages > 1 %} {% include post-paginator.html %} {% endif %}

<style>
  /* 🌸 전체 컨테이너 */
  .posts-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-top: 2rem;
  }

  /* 🌸 카드 */
  .post-card {
    background-color: #fff;
    border: 1.5px solid #f8dce6;
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.3s ease-in-out;
  }

  /* 🌸 링크 래퍼 */
  .post-link {
    display: flex;
    flex-direction: row;
    text-decoration: none;
    color: inherit;
  }

  /* 🌸 썸네일 */
  .post-thumbnail {
    width: 220px;
    height: 150px;
    object-fit: cover;
    border-right: 1px solid #f8dce6;
  }

  /* 🌸 본문 */
  .post-content {
    flex: 1;
    padding: 0rem 1.2rem 1rem 1.2rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .post-title {
    color: #f28ab3;
    font-weight: 700;
    font-size: 1.25rem;
    margin-top: 1.5rem;
  }
  .post-card:first-child {
    margin-top: 0.5rem !important;
  }

  .post-description {
    color: #555;
    font-size: 0.95rem;
    line-height: 1.5;
    margin-bottom: 1rem;
  }

  /* 🌸 메타 정보 */
  .post-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.8rem;
    font-size: 0.85rem;
    color: #f5a8c4;
  }

  .meta-item i {
    margin-right: 0.3rem;
  }

  .pin {
    background-color: #fdebf2;
    border-radius: 12px;
    padding: 0.1rem 0.5rem;
    color: #f28ab3;
    font-weight: 600;
  }

  /* 🌙 다크모드 */
  @media (prefers-color-scheme: dark) {
    .post-card {
      background-color: #2b2b2b;
      border-color: #3a3a3a;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
    }

    .post-title {
      color: #f5a8c4;
    }

    .post-description {
      color: #ccc;
    }

    .meta-item {
      color: #f5a8c4;
    }

    .pin {
      background-color: #3b2e33;
      color: #f5a8c4;
    }
  }

  /* 📱 반응형 */
  @media (max-width: 768px) {
    .post-link {
      flex-direction: column;
    }
    .post-thumbnail {
      width: 100%;
      height: 180px;
      border-right: none;
      border-bottom: 1px solid #f8dce6;
    }
  }
</style>
